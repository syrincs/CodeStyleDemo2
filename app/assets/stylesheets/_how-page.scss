.how-wrapper-main,
.how-wrapper-aux {
  padding: 120px 0;
  text-align: center;

  h1 {
    font-weight: 200;
  }

  p {
    font-weight: 200;
    max-width: 560px;
    margin: 0 auto;
    font-size: 16px;
  }

  &:first-child {
    margin-top: -100px;
  }

  &:last-child {
    margin-bottom: -48px;
    padding-bottom: 130px;
  }
}

.how-wrapper-main {
  background-color: white;

  & + & {
    padding-top: 0;
  }
}

.how-wrapper-aux {
  background-color: #F8F6EE;
  padding-top: 0;
  overflow: hidden;
}

.how-banner-circle {
  margin-top: 10px;
  display: inline-block;
  width: 55px;
  height: 55px;
  border: 2px solid;
  border-radius: 50%;

  &:after {
    content: '';
    width: 10px;
    height: 10px;
    border-style: solid;
    border-width: 0 0 2px 2px;
    position: absolute;
    bottom: 15px;
    left: 50%;
    @include transform-origin(0 100%);
    @include transform(rotate(-45deg));
  }

  &:before {
    content: '';
    height: 20px;
    border-left: 2px solid;
    position: absolute;
    left: 50%;
    top: 50%;
    margin: -10px 0 0 -1px;
  }
}

.how-actions {
  padding-top: 30px;
}

.how-actions-separator {
  display: inline-block;
  margin: 0 20px;
}

// Animation Effects

.an-anim-init * {
  display: none;
}

@include keyframes(shadow-in) {
  0% { @include transform(scale(0)); }
  100% { @include transform(scale(1)); }
}

@include keyframes(clock-hour) {
  0% { @include transform(rotate(0deg)); }
  15% { @include transform(rotate(40deg)); }
  100% { @include transform(rotate(135deg)); }
}

@include keyframes(clock-min) {
  0% { @include transform(rotate(0deg)); }
  15% { @include transform(rotate(480deg)); }
  100% { @include transform(rotate(1530deg)); }
}

// Needs work
@include keyframes(clock-in) { 
  0% { @include transform(scale(0, 0)); }
  4.7% { @include transform(scale(0.45, 0.45)); }
  9.41% { @include transform(scale(0.883, 0.883)); }
  14.11% { @include transform(scale(1.141, 1.141)); }
  18.72% { @include transform(scale(1.212, 1.212)); }
  24.32% { @include transform(scale(1.151, 1.151)); }
  29.93% { @include transform(scale(1.048, 1.048)); }
  35.54% { @include transform(scale(0.979, 0.979)); }
  41.04% { @include transform(scale(0.961, 0.961)); }
  52.15% { @include transform(scale(0.991, 0.991)); }
  63.26% { @include transform(scale(1.007, 1.007)); }
  85.49% { @include transform(scale(0.999, 0.999)); }
  100% { @include transform(scale(1, 1)); } 
}

@include keyframes(price-in) {
  0% { @include transform(translatex(-138px)); opacity: 0; }
  100% { @include transform(translatex(0)); opacity: 1; }
}

@include keyframes(fade-in) {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

@include keyframes(count-down) {
  0% { @include transform(translatey(720px)); } // 0
  6.25% { @include transform(translatey(720px)); }
  12.5% { @include transform(translatey(648px)); } // 9
  18.75% { @include transform(translatey(648px)); }
  25% { @include transform(translatey(576px)); } // 8
  31.25% { @include transform(translatey(576px)); }
  37.5% { @include transform(translatey(576px)); }
  43.75% { @include transform(translatey(504px)); } // 7 
  50% { @include transform(translatey(432px)); } // 6
  56.25% { @include transform(translatey(360px)); } // 5
  62.5% { @include transform(translatey(288px)); } // 4
  68.75% { @include transform(translatey(216px)); } // 3
  75% { @include transform(translatey(144px)); } // 2
  81.25% { @include transform(translatey(72px)); } // 1
  87.5% { @include transform(translatey(72px)); }
  93.75% { @include transform(translatey(72px)); }
  100% { @include transform(translatey(0)); } // 0
}

@include keyframes(count-up) {
  0% { @include transform(translatey(-720px)); } // 0
  6.25% { @include transform(translatey(-648px)); } // 1
  12.5% { @include transform(translatey(-648px)); }
  18.75% { @include transform(translatey(-576px)); } // 2
  25% { @include transform(translatey(-576px)); }
  31.25% { @include transform(translatey(-576px)); }
  37.5% { @include transform(translatey(-504px)); } // 3
  43.75% { @include transform(translatey(-432px)); } // 4
  50% { @include transform(translatey(-360px)); } // 5
  56.25% { @include transform(translatey(-288px)); } // 6
  62.5% { @include transform(translatey(-216px)); } // 7
  68.75% { @include transform(translatey(-144px)); } // 8
  75% { @include transform(translatey(-72px)); } // 9
  81.25% { @include transform(translatey(-72px)); }
  87.5% { @include transform(translatey(-72px)); }
  93.75% { @include transform(translatey(0)); } // 0
  100% { @include transform(translatey(0)); }
}

@include keyframes(digit-down) {
  0% { @include transform(translatey(72px)); }
  100% { @include transform(translatey(0)); }
}

@include keyframes(digit-up) {
  0% { @include transform(translatey(-72px)); }
  100% { @include transform(translatey(0)); }
}

@include keyframes(box-in) {
  0% { @include transform(translatex(-161px)); opacity: 0; }
  100% { @include transform(translatex(0)); opacity: 1; }
}

@include keyframes(stamp-in) {
  0% { @include transform(scale(3)); opacity: 0; }
  100% { @include transform(scale(1)); opacity: 1; }
}

@include keyframes(lhand-in) {
  0% { @include transform(translate(-100px, -380px)); }
  100% { @include transform(translate(0, 0)); }
}

@include keyframes(rhand-in) {
  0% { @include transform(translate(100px, -380px)); }
  100% { @include transform(translate(0, 0)); }
}

@include keyframes(bill-in) {
  0% { @include transform(translate(90px, 77px)); opacity: 0; }
  100% { @include transform(translate(0, 0)); opacity: 1; }
}

$anim-coin-offsets: 210px, 20px, 120px, 140px, 120px, 140px, 180px, 210px, 125px, 150px;

@for $n from 1 through length($anim-coin-offsets) {
  $y: nth($anim-coin-offsets, $n);
  @include keyframes(coin-in-#{$n}) {
    0% { @include transform(translate(0, -$y)); opacity: 0; }
    100% { @include transform(translate(0, 0)); opacity: 1; }
  }
}

.an-anim-in {
  $ease-out-cubic: cubic-bezier(0.215, 0.61, 0.355, 1);

  .an-shadow {
    @include animation(shadow-in 0.5s $ease-out-cubic both);
  }

  &#an-stage-1 .an-clock {
    @include animation(clock-in 0.5s linear both);

    .an-clock-hour {
      @include animation(clock-hour 5.5s linear both);
    }
    
    .an-clock-minute {
      @include animation(clock-min 5.5s linear both);
    }
  }

  .an-start-price {
    @include animation(price-in 0.5s $ease-out-cubic both);
  }

  .an-coins-coin {

    @mixin delay-coin($n, $s) {
      &:nth-child(#{$n}) {
        @include animation(fade-in 1ms $s linear both);
      }
    }

    @include delay-coin(1,  1.25s);
    @include delay-coin(2,  1.75s);
    @include delay-coin(3,  2.50s);
    @include delay-coin(4,  2.75s);
    @include delay-coin(5,  3.00s);
    @include delay-coin(6,  3.25s);
    @include delay-coin(7,  3.50s);
    @include delay-coin(8,  3.75s);
    @include delay-coin(9,  4.00s);
    @include delay-coin(10, 4.75s);
  }

  .an-current-price,
  .an-bids {
    @include animation(fade-in 0.5s 0.5s $ease-out-cubic both);
  }

  .an-current-price-digit1 {
    @include animation(digit-down 0.25s 1.25s $ease-out-cubic both);
  }

  .an-current-price-digit2 {
    @include animation(count-down 4s 1s $ease-out-cubic both);
  }

  .an-bids-digit1 {
    @include animation(digit-up 0.25s 4.5s $ease-out-cubic both);
  }

  .an-bids-digit2 {
    @include animation(count-up 4s 1s $ease-out-cubic both);
  }

  .an-box-top,
  .an-box-bottom {
    @include animation(box-in 0.214s $ease-out-cubic both);
  }

  .an-box-stamp {
    @include animation(stamp-in 0.25s 0.75s $ease-out-cubic both);
  }

  .an-lhand {
    @include animation(lhand-in 0.75s $ease-out-cubic both);
  }

  .an-lhand-money {

    @mixin delay-bill($n, $t, $d) {
      &:nth-child(#{$n}) {
        @include animation(bill-in $t $d $ease-out-cubic both);
      }
    }

    @include delay-bill(1, 0.5s, 1s);
    @include delay-bill(2, 0.377s, 1.5s);
    @include delay-bill(3, 0.25s, 1.877s);
    @include delay-bill(4, 0.25s, 2.127s);
  }

  .an-rhand {
    @include animation(rhand-in 0.75s $ease-out-cubic both);
  }

  .an-rhand-coins {

    @mixin delay-coin($n, $t, $d) {
      *:nth-child(#{$n}) {
        @include animation(coin-in-#{$n} $t $d $ease-out-cubic both);
      }
    }

    @include delay-coin(1,  0.373s, 2.377s);
    @include delay-coin(2,  0.25s,  2.25s);
    @include delay-coin(3,  0.25s,  2.75s);
    @include delay-coin(4,  0.383s, 2.863s);
    @include delay-coin(5,  0.273s, 3.25s);
    @include delay-coin(6,  0.25s,  3.375s);
    @include delay-coin(7,  0.383s, 3.5s);
    @include delay-coin(8,  0.25s,  3.75s);
    @include delay-coin(9,  0.25s,  3.883s);
    @include delay-coin(10, 0.25s,  4.00s);
  }
}

@include keyframes(fade-out) {
  0% { opacity: 1; }
  100% { opacity: 0; }
}

@include keyframes(price-out) {
  0% { @include transform(translatex(0)); opacity: 1; }
  100% { @include transform(translatex(-120px)); opacity: 0; }
}

@include keyframes(coins-out) {
  0% { @include transform(translatex(0)); opacity: 1; }
  100% { @include transform(translatex(100px)); opacity: 0; }
}

@include keyframes(shadow-out) {
  0% { @include transform(scale(1)); }
  50% { @include transform(scale(0.75)); }
  100% { @include transform(scale(0)); }
}

@include keyframes(clock-out) {
  0% { @include transform(translatey(0) rotate(0)); }
  50% { @include transform(translatey(0) rotate(16deg)); }
  100% { @include transform(translatey(-50px) rotate(11deg)); }
}

@include keyframes(box-out) {
  0% { @include transform(translatex(0)); opacity: 1 }
  100% { @include transform(translate(170px)); opacity: 0 }
}

@include keyframes(lhand-out) {
  0% { @include transform(translate(0, 0)); }
  100% { @include transform(translate(-100px, -380px)); }
}

@include keyframes(rhand-out) {
  0% { @include transform(translate(0, 0)); }
  100% { @include transform(translate(100px, -380px)); }
}

.an-anim-out {
  $ease-out-cubic: cubic-bezier(0.215, 0.61, 0.355, 1);

  .an-shadow {
    @include animation(shadow-out 0.286s 0.5s linear both);
  }

  .an-clock {
    @include animation(clock-out 0.286s 0.5s linear both);
  }

  .an-start-price {
    @include animation(price-out 0.5s $ease-out-cubic both);
  }

  .an-coins {
    @include animation(coins-out 0.5s $ease-out-cubic both);
  }

  .an-current-price,
  .an-bids {
    @include animation(fade-out 0.25s $ease-out-cubic both);
  }

  .an-box {
    @include animation(box-out 0.25s $ease-out-cubic both);
  }

  .an-lhand {
    @include animation(lhand-out 0.75s $ease-out-cubic both);
  }

  .an-rhand {
    @include animation(rhand-out 0.75s $ease-out-cubic both);
  }
}

.an-clock-out-freeze {
  @include transform(translatey(32px) rotate(11deg));
}

// Animation Elements

.an-stage1 {
  width: 952px;
  height: 330px;
  position: relative;
  margin: 0 auto 60px;
}

.an-stage2 {
  width: 952px;
  height: 420px;
  position: relative;
  margin: 0 auto 60px;
}

.an-shadow {
  width: 253px;
  height: 16px;
  background-image: image-url("how-it-works/shadow.png");
  background-size: cover;
  position: absolute;
  left: 349px;
  top: 293px;
  @include transform-origin(80.52% 50.80%);
}

.an-clock {
  width: 253px;
  height: 283px;
  background-image: image-url("how-it-works/clock.png");
  background-size: cover;
  position: absolute;
  left: 349px;
  top: 23px;
  z-index: 1;
  @include transform-origin(78.91% 99.32%);
}

.an-clock-hour {
  width: 19px;
  height: 94px;
  background-image: image-url("how-it-works/hour-arrow.png");
  background-size: cover;
  position: absolute;
  left: 117px;
  top: 72px;
  @include transform-origin(51.91% 77.02%);
  @include transform(rotate(135deg));
}

.an-clock-minute {
  width: 12px;
  height: 105px;
  background-image: image-url("how-it-works/min-arrow.png");
  background-size: cover;
  position: absolute;
  left: 121px;
  top: 66px;
  @include transform-origin(51.94% 74.64%);
  @include transform(rotate(1530deg));
}

.an-clock-center {
  width: 36px;
  height: 35px;
  background-image: image-url("how-it-works/center.png");
  background-size: cover;
  position: absolute;
  left: 109px;
  top: 127px;
}

.an-start-price {
  width: 142px;
  height: 84px;
  background-image: image-url("how-it-works/price-badge.png");
  background-size: cover;
  position: absolute;
  left: 278px;
  top: 233px;
  z-index: 20;
}

.an-coins {
  width: 107px;
  height: 111px;
  position: absolute;
  left: 551px;
  top: 207px;
  z-index: 20;
}

.an-coins-coin {
  width: 92px;
  height: 33px;
  background-image: image-url("how-it-works/coin.png");
  background-size: cover;
  position: absolute;

  @mixin coin($n, $x, $y) {
    &:nth-child(#{$n}) {
      left: $x;
      top: $y;
    }
  }

  @include coin(1,  0px,  78px);
  @include coin(2,  10px, 68px);
  @include coin(3,  1px,  58px);
  @include coin(4,  0px,  49px);
  @include coin(5,  5px,  41px);
  @include coin(6,  10px, 33px);
  @include coin(7,  1px,  25px);
  @include coin(8,  10px, 16px);
  @include coin(9,  15px, 8px);
  @include coin(10, 5px,  0px);
}

.an-current-price-label {
  width: 136px;
  height: 19px;
  background-image: image-url("how-it-works/current-price.png");
  background-size: cover;
  position: absolute;
  left: 153px;
  top: 108px;
}

.an-current-price-symbol {
  width: 26px;
  height: 44px;
  background-image: image-url("how-it-works/dollar-symbol.png");
  background-size: cover;
  position: absolute;
  left: 159px;
  top: 151px;
}

.an-current-price-mask {
  width: 78px;
  height: 56px;
  overflow: hidden;
  position: absolute;
  left: 196px;
  top: 145px;
}

.an-current-price-digit1 {
  width: 37px;
  height: 772px;
  background-image: image-url("how-it-works/digits.png");
  background-size: cover;
  position: absolute;
  left: 0;
  top: -430px;
}

.an-current-price-digit2 {
  width: 37px;
  height: 772px;
  background-image: image-url("how-it-works/digits.png");
  background-size: cover;
  position: absolute;
  left: 40px;
  top: -718px;
}

.an-bids-label {
  width: 45px;
  height: 19px;
  background-image: image-url("how-it-works/bids.png");
  background-size: cover;
  position: absolute;
  left: 704px;
  top: 108px;
}

.an-bids-mask {
  width: 78px;
  height: 56px;
  overflow: hidden;
  position: absolute;
  left: 685px;
  top: 145px;
}

.an-bids-digit1 {
  width: 37px;
  height: 772px;
  background-image: image-url("how-it-works/digits.png");
  background-size: cover;
  position: absolute;
  left: 1px;
  top: -646px;
}

.an-bids-digit2 {
  width: 37px;
  height: 772px;
  background-image: image-url("how-it-works/digits.png");
  background-size: cover;
  position: absolute;
  left: 40px;
  top: 2px;
}

.an-box-top {
  width: 418px;
  height: 93px;
  background-image: image-url("how-it-works/box-top.png");
  background-size: cover;
  position: absolute;
  left: 288px;
  top: 5px;
  z-index: 1;
}

.an-box-bottom {
  width: 420px;
  height: 226px;
  background-image: image-url("how-it-works/box-bottom.png");
  background-size: cover;
  position: absolute;
  left: 293px;
  top: 98px;
  z-index: 20;
}

.an-box-stamp {
  width: 236px;
  height: 107px;
  background-image: image-url("how-it-works/stamp.png");
  background-size: cover;
  position: absolute;
  left: 358px;
  top: 189px;
  z-index: 30;
}

.an-lhand {
  width: 370px;
  height: 439px;
  background-image: image-url("how-it-works/l-hand-base.png");
  background-size: cover;
  position: absolute;
  left: 86px;
  top: -60px;
}

.an-lhand-money-bill {
  width: 270px;
  height: 123px;
  background-image: image-url("how-it-works/tendollars.png");
  background-size: cover;
  position: absolute;
  @include transform-origin(50% 50%);

  @mixin bill($n, $x, $y, $d) {
    .an-lhand-money:nth-child(#{$n}) & {
      left: $x;
      top: $y;
      @include transform(rotate(#{$d}));
    }
  }

  @include bill(1, 88px,  265px, -30deg);
  @include bill(2, 95px,  271px, -34deg);
  @include bill(3, 103px, 275px, -37deg);
  @include bill(4, 111px, 279px, -41deg);
}

.an-lhand-finger {
  width: 102px;
  height: 125px;
  background-image: image-url("how-it-works/l-finger.png");
  background-size: cover;
  position: absolute;
  left: 104px;
  top: 232px;
}

.an-rhand {
  width: 370px;
  height: 439px;
  background-image: image-url("how-it-works/r-hand-base.png");
  background-size: cover;
  position: absolute;
  left: 543px;
  top: -60px;
}

.an-rhand-coins > * {
  position: absolute;

  @mixin coin($n, $x, $y) {
    &:nth-child(#{$n}) {
      left: $x;
      top: $y;
    }
  }

  @include coin(1,  107px, 293px);
  @include coin(2,  138px, 270px);
  @include coin(3,  86px,  247px);
  @include coin(4,  112px, 260px);
  @include coin(5,  67px,  293px);
  @include coin(6,  118px, 320px);
  @include coin(7,  142px, 300px);
  @include coin(8,  96px,  337px);
  @include coin(9,  86px,  312px);
  @include coin(10, 55px,  337px);
}

.an-rhand-coins-coin1 {
  width: 52px;
  height: 46px;
  background-image: image-url("how-it-works/1dollar-1.png");
  background-size: cover;
}

.an-rhand-coins-coin2 {
  width: 52px;
  height: 46px;
  background-image: image-url("how-it-works/1dollar-2.png");
  background-size: cover;
}

.an-rhand-coins-coin3 {
  width: 52px;
  height: 46px;
  background-image: image-url("how-it-works/1dollar-3.png");
  background-size: cover;
}

.an-rhand-coins-coin4 {
  width: 52px;
  height: 46px;
  background-image: image-url("how-it-works/1dollar-4.png");
  background-size: cover;
}

.an-rhand-finger {
  width: 102px;
  height: 125px;
  background-image: image-url("how-it-works/r-finger.png");
  background-size: cover;
  position: absolute;
  left: 164px;
  top: 230px;
}
